import{u as k,g as z,h as u,a as f,b as V,d as _,G as p,t as h,e as i,P as x,l as U,Q as $,s as B,n as S,B as E,aa as M,L as g,w as N,U as q,_ as I,M as L,i as T,r as F,y as w,ab as P}from"./index-fb57e085.js";const D={class:"subtitle"},H={class:"text-h5 mb-7"},A={__name:"CreateCategory",emits:["created"],setup(C,{emit:b}){const d=k(),o=z().appContext.app.config.globalProperties.$snackbar,v=u(),c=u(!0),a=u(""),r=u(100),n={title:[t=>!!t||g("message_EnterCategoryName"),t=>t&&t.length>=3&&t.length<=32||g("category_rules")],limit:[t=>!!t||g("message_EnterLimit"),t=>t&&t>=100||g("limit_rules")]},y=async()=>{const{valid:t}=await v.value.validate();if(t)try{const s=await d.dispatch("category/createCategory",{title:a.value,limit:r.value});v.value.reset(),r.value=100,o.showMessage("Категория создана"),b("created",s)}catch(s){console.error(s)}};return(t,s)=>(f(),V(M,{cols:"6",md:"6",sm:"12"},{default:_(()=>[p("div",null,[p("div",D,[p("h4",H,h(t.$filters.localize("create")),1)]),i(x,{ref_key:"form",ref:v,modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value=e),onSubmit:U(y,["prevent"])},{default:_(()=>[i($,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),rules:n.title,variant:"underlined",label:t.$filters.localize("title"),required:""},null,8,["modelValue","rules","label"]),i($,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=e=>r.value=e),modelModifiers:{number:!0},rules:n.limit,variant:"underlined",type:"number",label:t.$filters.localize("limit"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),i(B,{color:"green-darken-3",type:"submit",class:"mt-7"},{default:_(()=>[S(h(t.$filters.localize("create"))+" ",1),i(E,{icon:"mdi-send",class:"ml-3"})]),_:1})]),_:1},8,["modelValue","onSubmit"])])]),_:1}))}},G={class:"subtitle"},Q={class:"text-h5 mb-7"},R={__name:"EditCategory",props:{categories:{type:Array,required:!0}},emits:["updated"],setup(C,{emit:b}){const d=C,o=k(),v=z().appContext.app.config.globalProperties.$snackbar,c=u(d.categories[0].id),a=u(),r=u(!0),n=u(d.categories[0].title),y=u(d.categories[0].limit),t={title:[e=>!!e||g("message_EnterCategoryName"),e=>e&&e.length>=3&&e.length<=32||g("category_rules")],limit:[e=>!!e||g("message_EnterLimit"),e=>e&&e>=100||g("limit_rules")]};N(c,e=>{const l=d.categories.find(m=>m.id===e);n.value=l.title,y.value=l.limit});const s=async()=>{const{valid:e}=await a.value.validate();if(e)try{const l={id:c.value,title:n.value,limit:y.value};await o.dispatch("category/updateCategory",l),v.showMessage("Категория успешно обновлена"),b("updated",l)}catch{}};return(e,l)=>(f(),V(M,{cols:"6",md:"6",sm:"12"},{default:_(()=>[p("div",null,[p("div",G,[p("h4",Q,h(e.$filters.localize("edit")),1)]),i(x,{ref_key:"form",ref:a,modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=m=>r.value=m),onSubmit:U(s,["prevent"])},{default:_(()=>[i(q,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=m=>c.value=m),items:C.categories,"item-title":"title","item-value":"id",label:e.$filters.localize("select_category"),variant:"underlined"},null,8,["modelValue","items","label"]),i($,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=m=>n.value=m),rules:t.title,variant:"underlined",label:e.$filters.localize("title"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),i($,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=m=>y.value=m),rules:t.limit,variant:"underlined",type:"number",label:e.$filters.localize("limit"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),i(B,{color:"light-green-darken-4",type:"submit",class:"mt-7"},{default:_(()=>[S(h(e.$filters.localize("update"))+" ",1),i(E,{icon:"mdi-send",class:"ml-3"})]),_:1})]),_:1},8,["modelValue","onSubmit"])])]),_:1}))}};const j={class:"title mb-7"},J={class:"text-h4 mt-4 ml-2"},K={class:"mt-10"},O={key:1,class:"text-h5 px-5"},W={__name:"categories",setup(C){L({title:"pageTitles.categories"});const b=k(),d=u(!0),o=u([]),v=a=>{o.value.push(a)};T(async()=>{o.value=await b.dispatch("category/fetchCategories"),d.value=!1});const c=a=>{const r=o.value.findIndex(n=>n.id===a.id);o.value[r].title=a.title,o.value[r].limit=a.limit};return(a,r)=>{const n=F("loader");return f(),w("div",null,[p("div",j,[p("h3",J,h(a.$filters.localize("pageTitles.categories")),1)]),p("section",K,[d.value?(f(),V(n,{key:0,class:"page-loader"})):(f(),V(P,{key:1,class:"px-4"},{default:_(()=>[i(A,{class:"pr-6",onCreated:v}),o.value.length?(f(),V(R,{key:0,categories:o.value,onUpdated:c,class:"pl-6"},null,8,["categories"])):(f(),w("div",O,"Категорий пока нет"))]),_:1}))])])}}},Y=I(W,[["__scopeId","data-v-27f3ef21"]]);export{Y as default};
