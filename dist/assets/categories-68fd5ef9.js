import{d as k,b as U,k as p,S as D,e as _,f as y,g,K as c,t as b,s as l,i as r,h as s,W as q,n as B,X as x,y as $,q as M,D as I,ag as N,w as F,a0 as A,R as E,l as H,r as R,A as S,ah as z,_ as K}from"./index-ad5f5c55.js";import{u as w}from"./category-356cd342.js";import{c as C}from"./validations-2761c6db.js";const L={class:"subtitle"},W={class:"text-h5 mb-7"},X=k({__name:"CreateCategory",emits:["created"],setup(V,{emit:f}){const{createCategory:n}=w(),{showMessage:i}=U(),v=p(),a=D({title:"",limit:100}),o=async()=>{const{valid:d}=await v.value.validate();if(d)try{const e=await n({title:a.title,limit:a.limit});v.value.reset(),a.limit=100,i("Категория создана"),f("created",e)}catch(e){console.error(e)}};return(d,e)=>(_(),y(N,{cols:"6",md:"6",sm:"12"},{default:g(()=>[c("div",null,[c("div",L,[c("h4",W,b(l(r)("create")),1)]),s(q,{ref_key:"form",ref:v,onSubmit:B(o,["prevent"])},{default:g(()=>[s(x,{modelValue:a.title,"onUpdate:modelValue":e[0]||(e[0]=m=>a.title=m),rules:l(C).title,variant:"underlined",label:l(r)("title"),required:""},null,8,["modelValue","rules","label"]),s(x,{modelValue:a.limit,"onUpdate:modelValue":e[1]||(e[1]=m=>a.limit=m),modelModifiers:{number:!0},rules:l(C).limit,variant:"underlined",type:"number",label:l(r)("limit"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),s($,{color:"green-darken-3",type:"submit",class:"mt-7"},{default:g(()=>[M(b(l(r)("create"))+" ",1),s(I,{icon:"mdi-send",class:"ml-3"})]),_:1})]),_:1},8,["onSubmit"])])]),_:1}))}}),j={class:"subtitle"},G={class:"text-h5 mb-7"},J=k({__name:"EditCategory",props:{categories:{type:Array,required:!0}},emits:["updated"],setup(V,{emit:f}){const n=V,{updateCategory:i}=w(),{showMessage:v}=U(),a=p(n.categories[0].id),o=p(),d=p(!0),e=p(n.categories[0].title),m=p(n.categories[0].limit);F(a,h=>{const t=n.categories.find(u=>u.id===h);e.value=t.title,m.value=t.limit});const T=async()=>{const{valid:h}=await o.value.validate();if(h)try{const t={title:e.value,limit:m.value};await i(a.value,t),v("Категория успешно обновлена"),f("updated",t)}catch{}};return(h,t)=>(_(),y(N,{cols:"6",md:"6",sm:"12"},{default:g(()=>[c("div",null,[c("div",j,[c("h4",G,b(l(r)("edit")),1)]),s(q,{ref_key:"form",ref:o,modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=u=>d.value=u),onSubmit:B(T,["prevent"])},{default:g(()=>[s(A,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),items:V.categories,"item-title":"title","item-value":"id",label:l(r)("select_category"),variant:"underlined"},null,8,["modelValue","items","label"]),s(x,{modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=u=>e.value=u),rules:l(C).title,variant:"underlined",label:l(r)("title"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),s(x,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=u=>m.value=u),rules:l(C).limit,variant:"underlined",type:"number",label:l(r)("limit"),class:"mt-6",required:""},null,8,["modelValue","rules","label"]),s($,{color:"light-green-darken-4",type:"submit",class:"mt-7"},{default:g(()=>[M(b(l(r)("update"))+" ",1),s(I,{icon:"mdi-send",class:"ml-3"})]),_:1})]),_:1},8,["modelValue","onSubmit"])])]),_:1}))}}),O={class:"title mb-7"},P={class:"text-h4 mt-4 ml-2"},Q={class:"mt-10"},Y={key:1,class:"text-h5 px-5"},Z=k({__name:"categories",setup(V){E({title:"pageTitles.categories"});const{fetchCategories:f}=w(),n=p(!0),i=p([]),v=o=>{i.value.push(o)};H(async()=>{i.value=await f(),n.value=!1});const a=o=>{const d=i.value.findIndex(e=>e.id===o.id);i.value[d].title=o.title,i.value[d].limit=o.limit};return(o,d)=>{const e=R("app-loader");return _(),S("div",null,[c("div",O,[c("h3",P,b(l(r)("pageTitles.categories")),1)]),c("section",Q,[n.value?(_(),y(e,{key:0,class:"page-app-loader"})):(_(),y(z,{key:1,class:"px-4"},{default:g(()=>[s(X,{class:"pr-6",onCreated:v}),i.value.length?(_(),y(J,{key:0,categories:i.value,onUpdated:a,class:"pl-6"},null,8,["categories"])):(_(),S("div",Y,"Категорий пока нет"))]),_:1}))])])}}});const le=K(Z,[["__scopeId","data-v-713d9534"]]);export{le as default};
