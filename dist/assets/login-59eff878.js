import{M as y,u as z,f as C,$ as x,g as M,h as r,i as $,L as l,r as B,a as S,b as T,d as t,e as s,N as q,n as i,t as n,O as N,P as F,l as P,Q as _,s as U,S as D,G as E,T as L}from"./index-fb57e085.js";import{m as b}from"./messages-e76e0baf.js";import{b as v}from"./route-block-83d24a4e.js";const R={class:"text-center text-subtitle-1"},j={__name:"login",setup(A){y({title:"login"});const w=z(),h=C(),m=x(),c=M().appContext.app.config.globalProperties.$snackbar,f=r(),p=r(!0),u=r(""),d=r(""),g={email:[e=>!!e||l("enter_Email"),e=>e&&/^[a-z.-]+@[a-z.-]+\.[a-z]+$/i.test(e)||l("email_rules")],password:[e=>!!e||l("enter_Pass"),e=>e&&e.length>=6&&e.length<=32||l("pass_rules")]};$(()=>{b[m.query.message]&&c.showMessage(l(b[m.query.message]))});const k=async()=>{const{valid:e}=await f.value.validate();if(e){const a={email:u.value,password:d.value};try{await w.dispatch("auth/login",a),c.showMessage(l("login_success")),h.push("/")}catch{}}};return(e,a)=>{const V=B("router-link");return S(),T(L,{"max-width":"450",width:"100%",class:"pa-4"},{default:t(()=>[s(q,{class:"text-center"},{default:t(()=>[i(n(e.$filters.localize("home_bookkeeping")),1)]),_:1}),s(N,null,{default:t(()=>[s(F,{onSubmit:P(k,["prevent"]),ref_key:"form",ref:f,modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=o=>p.value=o)},{default:t(()=>[s(_,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),modelModifiers:{trim:!0},rules:g.email,variant:"underlined",label:"Email",class:"mt-4",required:""},null,8,["modelValue","rules"]),s(_,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=o=>d.value=o),modelModifiers:{trim:!0},rules:g.password,variant:"underlined",label:"Пароль",class:"mt-6",required:""},null,8,["modelValue","rules"]),s(U,{type:"submit",width:"100%",color:"teal-darken-2",class:"mt-8","append-icon":"mdi-send"},{default:t(()=>[i(n(e.$filters.localize("login")),1)]),_:1})]),_:1},8,["onSubmit","modelValue"])]),_:1}),s(D,{class:"mt-3 justify-center"},{default:t(()=>[E("div",R,[i(n(e.$filters.localize("no_account")+"? ")+" ",1),s(V,{to:"/register",tag:"a"},{default:t(()=>[i(n(e.$filters.localize("sign_in")),1)]),_:1})])]),_:1})]),_:1})}}};typeof v=="function"&&v(j);export{j as default};
