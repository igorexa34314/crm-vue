import{d as k,U as h,u as U,b as x,a as w,a5 as B,P as N,c as d,k as f,Q as I,f as $,z as j,K as v,t as p,q as s,i as n,h as b,a2 as y,x as C,p as E,C as T,$ as q,m as D,Y as K}from"./index-0f7889a6.js";import{_ as M,u as O}from"./validations-f3cfa90b.js";import{u as P}from"./user-d5c71921.js";import"./auth-e8c2f44c.js";const z={class:"title"},A={class:"text-h4 mt-4 ml-2"},Y=k({__name:"profile",setup(F){h({title:"pageTitles.profile"});const{t:l}=U({inheritLocale:!0,useScope:"global"}),{showMessage:u}=x(),V=w(),{currency:i}=B(N),S=d(()=>{var e;return((e=i.value)!=null&&e.rates?Object.keys(i.value.rates):["USD"]).map(a=>({title:l(`currencies.${a}`)+` (${a})`,value:a}))}),o=d(()=>V.info),c=f(),t=f({name:"",locale:"",currency:""}),_=[{title:"Русский",value:"ru-RU"},{title:"Українська",value:"uk-UA"},{title:"English",value:"en-US"}];I(()=>{if(o.value&&Object.keys(o.value).length){const{bill:r,...e}=o.value;t.value=e}});const g=async()=>{var e,a;if((a=await((e=c.value)==null?void 0:e.validate()))==null?void 0:a.valid)try{await P(t.value),u(l("updateProfile_message"))}catch(m){u(l(m)||m)}};return(r,e)=>($(),j("div",null,[v("div",z,[v("h3",A,p(s(l)("pageTitles.profile")),1)]),n(s(K),{ref_key:"form",ref:c,onSubmit:D(g,["prevent"]),class:"profile-form mt-8 px-4"},{default:b(()=>[n(M,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.name=a),rules:s(O).name,variant:"underlined",label:s(l)("name"),required:""},null,8,["modelValue","rules","label"]),n(y,{modelValue:t.value.locale,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.locale=a),items:_,label:s(l)("lang"),"item-title":"title","item-value":"value",variant:"underlined",class:"mt-4"},null,8,["modelValue","label"]),n(y,{modelValue:t.value.currency,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.currency=a),items:S.value,label:s(l)("currency"),"item-title":"title","item-value":"value",variant:"underlined",class:"mt-4"},null,8,["modelValue","items","label"]),n(C,{type:"submit",color:"teal-darken-2",class:"mt-5"},{default:b(()=>[E(p(s(l)("update"))+" ",1),n(T,{icon:s(q),class:"ml-3"},null,8,["icon"])]),_:1})]),_:1},8,["onSubmit"])]))}});export{Y as default};
