import{d as V,R as B,u as T,c as L,k as g,l as F,r as b,e as o,A as i,K as n,t as s,s as t,i as a,a3 as d,h as p,a4 as I,f as N,q as f,g as k,L as R,J as S,a5 as A,Q as D,_ as M}from"./index-ad5f5c55.js";import{u as $}from"./category-356cd342.js";import{u as q}from"./record-b4b51f4e.js";const z={class:"title d-flex flex-row align-center mb-3"},E={class:"text-h4 mt-4 ml-2 flex-grow-1"},H={class:"text-h4"},J={key:1,class:"mt-10 text-center text-h6"},K={key:2,class:"mt-10 px-4"},P={class:"d-flex flex-row align-center mb-3"},Q={class:"font-weight-bold mr-4"},U=V({__name:"planning",setup(j){B({title:"pageTitles.plan"});const u=T(),{fetchCategories:y}=$(),{fetchRecords:w}=q(),C=L(()=>{if(u.info&&u.info.bill)return u.info.bill}),h=g(!0),v=g([]),c=g();return F(async()=>{v.value=await w();const x=await y();c.value=x.map(l=>{const r=v.value.filter(e=>e.categoryId===l.id).filter(e=>e.type==="outcome").reduce((e,m)=>e+=+m.amount,0),_=100*r/l.limit>100?100:100*r/l.limit;return{...l,percent:_,spend:r}}),h.value=!1}),(x,l)=>{const r=b("app-loader"),_=b("router-link");return o(),i("div",null,[n("div",z,[n("h3",E,s(t(a)("pageTitles.plan")),1),n("h4",H,s(t(d)(t(C),"UAH")),1)]),p(I,{color:"black",thickness:"1.5",class:"bg-white mb-8"}),h.value?(o(),N(r,{key:0,class:"mt-10 page-loader"})):c.value&&!c.value.length?(o(),i("div",J,[f(s(t(a)("pageTitles.plan")),1),p(_,{to:"/categories"},{default:k(()=>[f(s(t(a)("no_categories")+". "),1)]),_:1})])):(o(),i("section",K,[(o(!0),i(R,null,S(c.value,(e,m)=>(o(),i("div",{key:e.id||m,class:"mt-8"},[n("p",P,[n("strong",Q,s(e.title)+":",1),n("span",null,s(t(d)(e.spend)+" "+t(a)("out_of")+" "+t(d)(e.limit)),1)]),p(A,{"model-value":e.percent,id:`progress-${e.id}`,color:e.percent>=90?"red":e.percent>=60?"yellow":"green",style:{cursor:"pointer"},rounded:"","rounded-bar":""},null,8,["model-value","id","color"]),p(D,{activator:`#progress-${e.id}`,location:"bottom","content-class":e.limit-e.spend<0?"bg-deep-orange-darken-3":"bg-light-green-darken-1"},{default:k(()=>[f(s((e.limit-e.spend<0?t(a)("exceeding"):t(a)("left"))+" "+t(d)(Math.abs(e.limit-e.spend))),1)]),_:2},1032,["activator","content-class"])]))),128))]))])}}});const X=M(U,[["__scopeId","data-v-c1dafdeb"]]);export{X as default};
