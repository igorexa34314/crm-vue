import{M as k,u as _,g as w,c as y,h as i,w as U,i as B,a as S,y as z,G as f,t as p,e as t,d as v,Q as I,U as $,s as x,n as M,B as N,l as T,P as C,L as r}from"./index-fb57e085.js";const E={class:"title"},F={class:"text-h4 mt-4 ml-2"},j={__name:"profile",setup(L){k({title:"pageTitles.profile"});const u=_(),V=w().appContext.app.config.globalProperties.$snackbar,s=y(()=>u.state.info.info),d=i(),m=i(!0),o=i(""),g=[{title:"Русский",value:"ru-RU"},{title:"Українська",value:"uk-UA"},{title:"English",value:"en-US"}],n=i(""),c=()=>{Object.keys(s.value).length&&(n.value=s.value.locale,o.value=s.value.name)};U(s,()=>{c()}),B(()=>{c()});const b={name:[e=>!!e||r("message_EnterName"),e=>e&&e.length>=3&&e.length<=32||r("name_rules")]},h=async()=>{const{valid:e}=await d.value.validate();if(e)try{await u.dispatch("info/updateInfo",{name:o.value,locale:n.value}),V.showMessage(r("updateProfile_message"))}catch(a){console.error(a)}};return(e,a)=>(S(),z("div",null,[f("div",E,[f("h3",F,p(e.$filters.localize("pageTitles.profile")),1)]),t(C,{ref_key:"form",ref:d,modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=l=>m.value=l),onSubmit:T(h,["prevent"]),class:"profile-form mt-8 px-4"},{default:v(()=>[t(I,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value=l),rules:b.name,variant:"underlined",label:e.$filters.localize("name"),required:""},null,8,["modelValue","rules","label"]),t($,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),items:g,label:e.$filters.localize("lang"),"item-title":"title","item-value":"value",variant:"underlined",class:"mt-4"},null,8,["modelValue","label"]),t(x,{type:"submit",color:"teal-darken-2",class:"mt-5"},{default:v(()=>[M(p(e.$filters.localize("update"))+" ",1),t(N,{icon:"mdi-send",class:"ml-3"})]),_:1})]),_:1},8,["modelValue","onSubmit"])]))}};export{j as default};
