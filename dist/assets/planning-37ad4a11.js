import{_ as b,M as k,u as $,c as w,h as u,i as x,r as m,a as o,y as a,G as l,t as s,x as z,e as i,Y as V,b as B,n as f,d as h,F as T,E as C,Z as M,K as N}from"./index-fb57e085.js";const D={class:"title d-flex flex-row align-center mb-3"},E={class:"text-h4 mt-4 ml-2 flex-grow-1"},F={class:"text-h4"},I={key:1,class:"mt-10 text-center text-h6"},L={key:2,class:"mt-10 px-4"},S={class:"d-flex flex-row align-center mb-3"},A={class:"font-weight-bold mr-4"},G={__name:"planning",setup(H){k({title:"pageTitles.plan"});const c=$(),v=w(()=>c.state.info.info),_=u(!0),g=u([]),d=u([]);return x(async()=>{g.value=await c.dispatch("record/fetchRecords");const t=await c.dispatch("category/fetchCategories");d.value=t.map(n=>{const r=g.value.filter(e=>e.categoryId===n.id).filter(e=>e.type==="outcome").reduce((e,y)=>e+=+y.amount,0),p=100*r/n.limit>100?100:100*r/n.limit;return{...n,percent:p,spend:r}}),_.value=!1}),(t,n)=>{const r=m("loader"),p=m("router-link");return o(),a("div",null,[l("div",D,[l("h3",E,s(t.$filters.localize("pageTitles.plan")),1),l("h4",F,s(t.$filters.currency(z(v).bill,"UAH")),1)]),i(V,{color:"black",thickness:"1.5",class:"bg-white mb-8"}),_.value?(o(),B(r,{key:0,class:"mt-10 page-loader"})):d.value.length?(o(),a("section",L,[(o(!0),a(T,null,C(d.value,e=>(o(),a("div",{key:e.id,class:"mt-8"},[l("p",S,[l("strong",A,s(e.title)+":",1),l("span",null,s(t.$filters.currency(e.spend)+" "+t.$filters.localize("out_of")+" "+t.$filters.currency(e.limit)),1)]),i(M,{"model-value":e.percent,id:`progress-${e.id}`,color:e.percent>=90?"red":e.percent>=60?"yellow":"green",style:{cursor:"pointer"},rounded:"","rounded-bar":""},null,8,["model-value","id","color"]),i(N,{activator:`#progress-${e.id}`,location:"bottom","content-class":e.limit-e.spend<0?"bg-deep-orange-darken-3":"bg-light-green-darken-1"},{default:h(()=>[f(s((e.limit-e.spend<0?t.$filters.localize("exceeding"):t.$filters.localize("left"))+" "+t.$filters.currency(Math.abs(e.limit-e.spend))),1)]),_:2},1032,["activator","content-class"])]))),128))])):(o(),a("div",I,[f(s(t.$filters.localize("pageTitles.plan")),1),i(p,{to:"/categories"},{default:h(()=>[f(s(t.$filters.localize("no_categories")+". "),1)]),_:1})]))])}}},P=b(G,[["__scopeId","data-v-964e739f"]]);export{P as default};
