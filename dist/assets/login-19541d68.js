import{d as x,R as h,j as v,H as y,a6 as C,b as S,k as B,S as M,l as T,i as s,r as q,e as F,f as N,g as t,h as e,T as R,q as i,t as n,s as a,U,W as j,n as A,X as c,y as H,Z as z,K as D,$ as E}from"./index-ad5f5c55.js";import{m as f}from"./messages-e76e0baf.js";import{u as p}from"./validations-2761c6db.js";import{b as _}from"./route-block-83d24a4e.js";const K={class:"text-center text-subtitle-1"},L=x({__name:"login",setup(W){h({title:"login"});const{login:g}=v(),{push:V}=y(),b=C(),{showMessage:u}=S(),m=B(),o=M({email:"",password:""});T(()=>{const r=b.query.message;f[r]&&u(s(f[r]))});const w=async()=>{const{valid:r}=await m.value.validate();if(r)try{await g(o),u(s("login_success")),V("/")}catch{u(s("login_error"))}};return(r,l)=>{const k=q("router-link");return F(),N(E,{"max-width":"450",width:"100%",class:"pa-4"},{default:t(()=>[e(R,{class:"text-center"},{default:t(()=>[i(n(a(s)("home_bookkeeping")),1)]),_:1}),e(U,null,{default:t(()=>[e(j,{onSubmit:A(w,["prevent"]),ref_key:"form",ref:m},{default:t(()=>[e(c,{modelValue:o.email,"onUpdate:modelValue":l[0]||(l[0]=d=>o.email=d),modelModifiers:{trim:!0},rules:a(p).email,variant:"underlined",label:"Email",class:"mt-4",required:""},null,8,["modelValue","rules"]),e(c,{modelValue:o.password,"onUpdate:modelValue":l[1]||(l[1]=d=>o.password=d),modelModifiers:{trim:!0},rules:a(p).password,variant:"underlined",label:"Пароль",class:"mt-6",required:""},null,8,["modelValue","rules"]),e(H,{type:"submit",width:"100%",color:"teal-darken-2",class:"mt-8","append-icon":"mdi-send"},{default:t(()=>[i(n(a(s)("login")),1)]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(z,{class:"mt-3 justify-center"},{default:t(()=>[D("div",K,[i(n(a(s)("no_account")+"? ")+" ",1),e(k,{to:"/register",tag:"a"},{default:t(()=>[i(n(a(s)("sign_in")),1)]),_:1})])]),_:1})]),_:1})}}});typeof _=="function"&&_(L);export{L as default};
