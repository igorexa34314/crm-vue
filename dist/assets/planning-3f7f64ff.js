import{d as B,U as L,u as T,a as N,c as F,j as x,ad as y,r as k,b as l,y as p,M as i,t as a,p as t,i as c,ae as f,g as _,af as M,e as A,n as b,f as w,N as D,L as I,ag as U,S as $}from"./index-9175fc32.js";import{f as j}from"./category-ce40ea36.js";import{f as z}from"./record-fbf39380.js";import{m as E}from"./messages-e76e0baf.js";import"./auth-f7cc9485.js";const H={class:"title d-flex flex-row align-center mb-3"},P={class:"text-h4 mt-4 ml-2 flex-grow-1"},R={class:"text-h4"},q={key:1,class:"mt-10 text-center text-h6"},G={key:2,class:"mt-10 px-4"},J={class:"d-flex flex-row align-center mb-3"},K={class:"font-weight-bold mr-4"},ee=B({__name:"planning",async setup(O){let s,m;L({title:"pageTitles.plan"});const g=T(),{showMessage:S}=N(),C=F(()=>{if(g.info&&g.info.bill)return g.info.bill}),h=x(!1),u=x();try{h.value=!0;const n=([s,m]=y(()=>z()),s=await s,m(),s),v=([s,m]=y(()=>j()),s=await s,m(),s);v&&n&&(u.value=v.map(r=>{const d=n.filter(o=>o.categoryId===r.id).filter(o=>o.type==="outcome").reduce((o,V)=>o+=+V.amount,0),e=100*d/r.limit>100?100:100*d/r.limit;return{...r,percent:e,spend:d}}))}catch(n){S(E[n]||n)}finally{h.value=!1}return(n,v)=>{const r=k("app-loader"),d=k("router-link");return l(),p("div",null,[i("div",H,[i("h3",P,a(t(c)("pageTitles.plan")),1),i("h4",R,a(t(f)(t(C),"UAH")),1)]),_(M,{color:"black",thickness:"1.5",class:"bg-white mb-8"}),h.value?(l(),A(r,{key:0,class:"mt-10",page:""})):u.value&&!u.value.length?(l(),p("div",q,[b(a(t(c)("pageTitles.plan")),1),_(d,{to:"/categories"},{default:w(()=>[b(a(t(c)("no_categories")+". "),1)]),_:1})])):(l(),p("section",G,[(l(!0),p(D,null,I(u.value,(e,o)=>(l(),p("div",{key:e.id||o,class:"mt-8"},[i("p",J,[i("strong",K,a(e.title)+":",1),i("span",null,a(t(f)(e.spend)+" "+t(c)("out_of")+" "+t(f)(e.limit)),1)]),_(U,{"model-value":e.percent,id:`progress-${e.id}`,color:e.percent>=90?"red":e.percent>=60?"yellow":"green",style:{cursor:"pointer"},rounded:"","rounded-bar":""},null,8,["model-value","id","color"]),_($,{activator:`#progress-${e.id}`,location:"bottom","content-class":e.limit-e.spend<0?"bg-deep-orange-darken-3":"bg-light-green-darken-1"},{default:w(()=>[b(a((e.limit-e.spend<0?t(c)("exceeding"):t(c)("left"))+" "+t(f)(Math.abs(e.limit-e.spend))),1)]),_:2},1032,["activator","content-class"])]))),128))]))])}}});export{ee as default};
