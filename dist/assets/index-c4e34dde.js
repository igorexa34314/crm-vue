import{q,w as B,M as A,ah as E,k as O,c as S,Q as I,aB as D}from"./index-882bc6b4.js";function $(e){return typeof e=="function"?e():q(e)}const F=e=>typeof e<"u",b=()=>{};function N(e,t=!1,r="Timeout"){return new Promise((d,p)=>{setTimeout(t?()=>p(r):d,e)})}function T(e,t=!1){function r(n,{flush:u="sync",deep:o=!1,timeout:s,throwOnTimeout:f}={}){let v=null;const h=[new Promise(a=>{v=B(e,i=>{n(i)!==t&&(v==null||v(),a(i))},{flush:u,deep:o,immediate:!0})})];return s!=null&&h.push(N(s,f).then(()=>$(e)).finally(()=>v==null?void 0:v())),Promise.race(h)}function d(n,u){if(!A(n))return r(i=>i===n,u);const{flush:o="sync",deep:s=!1,timeout:f,throwOnTimeout:v}=u??{};let c=null;const a=[new Promise(i=>{c=B([e,n],([P,j])=>{t!==(P===j)&&(c==null||c(),i(P))},{flush:o,deep:s,immediate:!0})})];return f!=null&&a.push(N(f,v).then(()=>$(e)).finally(()=>(c==null||c(),$(e)))),Promise.race(a)}function p(n){return r(u=>!!u,n)}function m(n){return d(null,n)}function _(n){return d(void 0,n)}function y(n){return r(Number.isNaN,n)}function g(n,u){return r(o=>{const s=Array.from(o);return s.includes(n)||s.includes($(n))},u)}function w(n){return l(1,n)}function l(n=1,u){let o=-1;return r(()=>(o+=1,o>=n),u)}return Array.isArray($(e))?{toMatch:r,toContains:g,changed:w,changedTimes:l,get not(){return T(e,!t)}}:{toMatch:r,toBe:d,toBeTruthy:p,toBeNull:m,toBeNaN:y,toBeUndefined:_,changed:w,changedTimes:l,get not(){return T(e,!t)}}}function J(e){return T(e)}function K(e,t,r){let d;A(r)?d={evaluating:r}:d=r||{};const{lazy:p=!1,evaluating:m=void 0,shallow:_=!0,onError:y=b}=d,g=O(!p),w=_?E(t):O(t);let l=0;return I(async n=>{if(!g.value)return;l++;const u=l;let o=!1;m&&Promise.resolve().then(()=>{m.value=!0});try{const s=await e(f=>{n(()=>{m&&(m.value=!1),o||f()})});u===l&&(w.value=s)}catch(s){y(s)}finally{m&&u===l&&(m.value=!1),o=!0}}),p?S(()=>(g.value=!0,w.value)):w}var M=Object.defineProperty,U=Object.defineProperties,C=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&x(e,r,t[r]);if(V)for(var r of V(t))z.call(t,r)&&x(e,r,t[r]);return e},R=(e,t)=>U(e,C(t));function W(e,t,r){const{immediate:d=!0,delay:p=0,onError:m=b,onSuccess:_=b,resetOnExecute:y=!0,shallow:g=!0,throwError:w}=r??{},l=g?E(t):O(t),n=O(!1),u=O(!1),o=E(void 0);async function s(c=0,...h){y&&(l.value=t),o.value=void 0,n.value=!1,u.value=!0,c>0&&await N(c);const a=typeof e=="function"?e(...h):e;try{const i=await a;l.value=i,n.value=!0,_(i)}catch(i){if(o.value=i,m(i),w)throw i}finally{u.value=!1}return l.value}d&&s(p);const f={state:l,isReady:n,isLoading:u,error:o,execute:s};function v(){return new Promise((c,h)=>{J(u).toBe(!1).then(()=>c(f)).catch(h)})}return R(Q({},f),{then(c,h){return v().then(c,h)}})}function G(e){return JSON.parse(JSON.stringify(e))}function X(e,t,r,d={}){var p,m,_;const{clone:y=!1,passive:g=!1,eventName:w,deep:l=!1,defaultValue:n,shouldEmit:u}=d,o=D(),s=r||(o==null?void 0:o.emit)||((p=o==null?void 0:o.$emit)==null?void 0:p.bind(o))||((_=(m=o==null?void 0:o.proxy)==null?void 0:m.$emit)==null?void 0:_.bind(o==null?void 0:o.proxy));let f=w;t||(t="modelValue"),f=w||f||`update:${t.toString()}`;const v=a=>y?typeof y=="function"?y(a):G(a):a,c=()=>F(e[t])?v(e[t]):n,h=a=>{u?u(a)&&s(f,a):s(f,a)};if(g){const a=c(),i=O(a);return B(()=>e[t],P=>i.value=v(P)),B(i,P=>{(P!==e[t]||l)&&h(P)},{deep:l}),i}else return S({get(){return c()},set(a){h(a)}})}export{W as a,K as c,X as u};
