import{d as S,u as C,j as A,a as D,c as H,k as V,l as T,o as U,f as i,g as y,h as e,i as t,m as O,n as P,p as w,t as f,q as s,s as q,v as F,x as M,y as N,z as b,A as R,B as k,C as I,D as L,E as G,F as K,G as J,H as Q,I as W,J as X,K as j,L as Y,M as Z,N as ee,O as te,P as ae,Q as oe,b as se,r as B,R as le,S as ne,V as re,T as ie,_ as ce}from"./index-906b0197.js";import{u as ue,a as de}from"./index-937a8055.js";import{f as pe}from"./user-a397025f.js";import{m as me}from"./fbMessages-e76e0baf.js";import{l as fe}from"./auth-7a072a28.js";const _e={key:0,class:"text-capitalize text-subtitle-1 font-weight-bold"},ge={key:1,class:"text-capitalize text-subtitle-1"},ve=S({__name:"AppNavbar",emits:["logout","click"],setup(c,{emit:a}){const{t:l,d:_}=C({inheritLocale:!0,useScope:"global"}),{push:u}=A(),g=D(),v=H(()=>{var r;return(r=g.info)==null?void 0:r.name}),d=V(new Date);let o;return T(()=>{o=setInterval(()=>d.value=new Date,1e3*20)}),U(()=>clearInterval(o)),(r,n)=>(i(),y(K,{elevation:2,color:"orange-lighten-1"},{prepend:e(()=>[t(P,{color:"blue-grey-darken-3",onClick:n[0]||(n[0]=O(p=>a("click"),["stop"]))})]),default:e(()=>[t(q,{class:"mt-1 text-blue-grey-darken-3"},{default:e(()=>[w(f(s(_)(d.value,"long")),1)]),_:1}),t(F),t(G,null,{activator:e(({props:p})=>[t(M,N({color:"blue-grey-darken-4",variant:"text"},p,{class:"mr-7","append-icon":s(J)}),{default:e(()=>[v.value?(i(),b("div",_e,f(v.value),1)):(i(),b("div",ge,f(s(l)("guest")),1))]),_:2},1040,["append-icon"])]),default:e(()=>[t(R,{density:"comfortable"},{default:e(()=>[t(k,{onClick:n[1]||(n[1]=p=>s(u)("/profile"))},{prepend:e(()=>[t(I,{icon:s(Q),class:"mr-3"},null,8,["icon"])]),default:e(()=>[t(L,null,{default:e(()=>[w(f(s(l)("pageTitles.profile")),1)]),_:1})]),_:1}),t(k,{onClick:n[2]||(n[2]=p=>a("logout"))},{prepend:e(()=>[t(I,{icon:s(W),class:"mr-3"},null,8,["icon"])]),default:e(()=>[t(L,null,{default:e(()=>[w(f(s(l)("logout")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),ye={class:"font-weight-bold"},xe=S({__name:"AppSidebar",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:a}){const l=c,{t:_}=C({inheritLocale:!0,useScope:"global"}),u=ue(l,"modelValue",a),g=V([{title:"bill",url:"/",exact:!0},{title:"history",url:"/history"},{title:"plan",url:"/planning"},{title:"newRecord",url:"/record"},{title:"categories",url:"/categories"}]);return(v,d)=>(i(),y(ee,{modelValue:s(u),"onUpdate:modelValue":d[0]||(d[0]=o=>Z(u)?u.value=o:null),location:"left",width:"300"},{default:e(()=>[t(R,null,{default:e(()=>[(i(!0),b(Y,null,X(g.value,o=>(i(),y(k,{key:o.url,to:o.url,"active-class":"active",link:"",exact:o.exact,color:"light-blue-darken-3",class:"px-5"},{default:e(()=>[j("span",ye,f(s(_)("menu."+o.title)),1)]),_:2},1032,["to","exact"]))),128))]),_:1})]),_:1},8,["modelValue"]))}}),$=async()=>{try{const c=await fetch("https://api.exchangerate.host/latest?base=USD&symbols=EUR%2CUAH%2CUSD%2CRUB",{method:"GET",redirect:"follow",headers:new Headers({"Content-Type":"application/json"})}),{rates:a,date:l}=await c.json();return{rates:a,date:l}}catch(c){te(c)}},Ve={class:"app-content pa-5"},he=S({__name:"main",setup(c){let a;const{state:l,isLoading:_,isReady:u,execute:g}=de($,null);ae(oe,{currency:l,isLoading:_,isReady:u,refresh:g});const{push:v}=A(),{t:d}=C({inheritLocale:!0,useScope:"global"}),o=D(),r=V(!0),n=V(!1);T(async()=>{try{(!o.info||!Object.keys(o.info).length)&&(a=await pe()),await $()}catch(h){const{showMessage:m}=se();m(me[h]||h)}finally{n.value=!1}}),U(()=>{a==null||a()});const p=async()=>{a==null||a(),await fe(),v({path:"/login",query:{message:"logout"}})};return(h,m)=>{const z=B("app-loader"),E=B("router-view");return n.value?(i(),y(z,{key:0,class:"main-loader"})):(i(),y(re,{key:1,class:"app-main-layout"},{default:e(()=>[t(ve,{onClick:m[0]||(m[0]=x=>r.value=!r.value),onLogout:p}),t(xe,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=x=>r.value=x)},null,8,["modelValue"]),t(le,{class:"app"},{default:e(()=>[j("div",Ve,[t(E)])]),_:1}),t(ne,{activator:".fixed-action-btn",text:s(d)("create_record"),"content-class":"bg-indigo-lighten-3 font-weight-medium"},{activator:e(({props:x})=>[t(M,N({color:"indigo-lighten-1",size:"x-large",class:"fixed-action-btn",to:"/record",position:"fixed",icon:s(ie)},x),null,16,["icon"])]),_:1},8,["text"])]),_:1}))}}});const Ie=ce(he,[["__scopeId","data-v-345b025a"]]);export{Ie as default};
